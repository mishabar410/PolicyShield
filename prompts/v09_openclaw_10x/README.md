# PolicyShield v0.9 ‚Äî Prompt Chain: OpenClaw 10/10

–¶–µ–ø–æ—á–∫–∞ –∏–∑ 11 –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤: SDK –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí —Ä–∞–∑–≤–µ–¥–∫–∞ API ‚Üí E2E —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º OpenClaw ‚Üí auth —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí PII taint-chain ‚Üí one-command setup ‚Üí –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ DX.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞—É–¥–∏—Ç–∞ OpenClaw-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ü–µ–Ω–µ–Ω–∞ –Ω–∞ 4/10. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. SDK —Ç–∏–ø—ã (`openclaw-plugin-sdk.d.ts`) —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ä—É–∫–∞–º–∏ ‚Äî **—Ä–µcon –ø–æ–∫–∞–∑–∞–ª: `openclaw/plugin-sdk` –ù–ï —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç hook-—Ç–∏–ø—ã** (BLOCKED)
2. –ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ E2E-—Ç–µ—Å—Ç–∞ —Å –∂–∏–≤—ã–º OpenClaw ‚Äî –≤—Å—ë –Ω–∞ –º–æ–∫–∞—Ö
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞: 5 —à–∞–≥–æ–≤, 2 —Ä–∞–Ω—Ç–∞–π–º–∞ (Python + Node.js)
4. –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî `/api/v1/reload` –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤—Å–µ—Ö
5. `after_tool_call` –Ω–µ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—Ç–µ—á–∫—É PII ‚Äî trade-off –Ω–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
6. –ù–µ—Ç compatibility matrix, –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –≥–∞–π–¥–∞, –≤–∏–¥–µ–æ-–¥–µ–º–æ

## –§–∞–∑—ã

### –§–∞–∑–∞ 1: SDK –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø—Ä–æ–º–ø—Ç—ã 71‚Äì72) ‚Äî ‚õî BLOCKED

| # | –ü—Ä–æ–º–ø—Ç | –°—Ç–∞—Ç—É—Å | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ |
|---|--------|--------|-----------------|
| 71 | SDK Type Stubs | ‚õî BLOCKED | Recon: `openclaw/plugin-sdk` –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `PluginHook*` / `PluginLogger`. –°—Ç—É–±—ã –æ—Å—Ç–∞—é—Ç—Å—è |
| 72 | SDK Sync CI | ‚è∏ DEFERRED | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç 71. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: GitHub-based stub validation (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) |

### –§–∞–∑–∞ 2: E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–º–ø—Ç—ã 73‚Äì76) ‚Äî üîÑ –ü–ï–†–ï–†–ê–ë–û–¢–ê–ù–ê

| # | –ü—Ä–æ–º–ø—Ç | –°—Ç–∞—Ç—É—Å | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ |
|---|--------|--------|-----------------|
| 73 | **OpenClaw API Recon** | ‚úÖ DONE | –ù–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ Docker, –Ω–µ—Ç REST API, –Ω–µ—Ç test mode. [RESEARCH.md](../../tests/e2e-openclaw/RESEARCH.md) |
| 74 | E2E Tiered Tests | üìã TODO | Tier 2: smoke test (plugin load). Tier 3: manual Docker Compose |
| 75 | E2E Scenarios | üìã TODO | 5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —á–µ—Ä–µ–∑ hook dispatch: BLOCK, REDACT, ALLOW, APPROVE, fail-open |
| 76 | E2E CI Job | üìã TODO | CI: unit + smoke. Docker Compose ‚Äî manual/workflow_dispatch only |

> **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–≤–µ–¥–∫–∏:** –ù–µ—Ç REST API (WebSocket gateway), –Ω–µ—Ç test mode, –Ω–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞. –ü—Ä–æ–º–ø—Ç—ã 74‚Äì76 –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã –Ω–∞ tiered –ø–æ–¥—Ö–æ–¥.

### –§–∞–∑–∞ 3: Auth & Taint (–ø—Ä–æ–º–ø—Ç—ã 77‚Äì78)

| # | –ü—Ä–æ–º–ø—Ç | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ |
|---|--------|-----------------|
| 77 | Server Auth | Bearer token —á–µ—Ä–µ–∑ `POLICYSHIELD_API_TOKEN` + –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –ø–ª–∞–≥–∏–Ω–µ |
| 78 | PII Taint Chain | Session taint –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ PII –≤ output ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ |

### –§–∞–∑–∞ 4: One-Command Setup (–ø—Ä–æ–º–ø—Ç 79)

| # | –ü—Ä–æ–º–ø—Ç | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ |
|---|--------|-----------------|
| 79 | CLI Setup Command | `policyshield openclaw setup` ‚Äî –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ 5 —à–∞–≥–æ–≤ |

### –§–∞–∑–∞ 5: Docs & DX (–ø—Ä–æ–º–ø—Ç—ã 80‚Äì81)

| # | –ü—Ä–æ–º–ø—Ç | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ |
|---|--------|-----------------|
| 80 | Compatibility & Migration | Compatibility matrix + migration guide –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| 81 | Quickstart & Limitations | –í–∏–¥–µ–æ-ready quickstart, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π output scanning |

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø—Ä–æ–º–ø—Ç–∞–º–∏

```
71 (SDK Type Stubs)      ‚Üê ‚õî BLOCKED (openclaw/plugin-sdk –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç hook-—Ç–∏–ø—ã)
72 (SDK Sync CI)          ‚Üê ‚è∏ DEFERRED (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 71)
73 (API Recon)            ‚Üê –Ω–∏ –æ—Ç –∫–æ–≥–æ (‚ö° –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ E2E)
74 (E2E Docker Compose)   ‚Üê –ø–æ—Å–ª–µ 73 (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–∑–≤–µ–¥–∫–∏)
75 (E2E Scenarios)        ‚Üê –ø–æ—Å–ª–µ 74 (–Ω—É–∂–µ–Ω docker-compose)
76 (E2E CI Job)           ‚Üê –ø–æ—Å–ª–µ 75
77 (Server Auth)          ‚Üê –ø–æ—Å–ª–µ 72 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å 73‚Äì76)
78 (PII Taint Chain)      ‚Üê –ø–æ—Å–ª–µ 77
79 (CLI Setup)            ‚Üê –ø–æ—Å–ª–µ 76 –∏ 77 (–Ω—É–∂–µ–Ω auth + E2E –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
80 (Compat & Migration)   ‚Üê –ø–æ—Å–ª–µ 79
81 (Quickstart & Limits)  ‚Üê –ø–æ—Å–ª–µ 80 (–ø–æ—Å–ª–µ–¥–Ω–∏–π)
```

## –ü—Ä–∞–≤–∏–ª–∞

1. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:** –∫–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç = –∫–æ–¥ + —Ç–µ—Å—Ç—ã + –∫–æ–º–º–∏—Ç
2. **–†–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç:** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º ‚Äî `pytest tests/ -q` (–≤—Å–µ Python —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)
3. **TS —á–∏—Å—Ç:** `cd plugins/openclaw && npx tsc --noEmit` –±–µ–∑ –æ—à–∏–±–æ–∫
4. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ø—Ä–æ–º–ø—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É
5. **–ù–∏–∫–∞–∫–∏—Ö PR/issues –≤ OpenClaw:** –≤—Å—ë —Ä–µ—à–∞–µ–º –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–≥–æ —Ä–µ–ø–æ
6. **–ü—Ä–æ–º–ø—Ç 73 ‚Äî checkpoint:** –µ—Å–ª–∏ —Ä–∞–∑–≤–µ–¥–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞, —á—Ç–æ –¥–æ–ø—É—â–µ–Ω–∏—è –Ω–µ–≤–µ—Ä–Ω—ã ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã 74‚Äì76 –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
